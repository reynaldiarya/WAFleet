# =========================
# App / Runtime
# =========================
NODE_ENV=development     # environment: development | test | production
LOG_LEVEL=info           # pino log level: silent | error | warn | info | debug | trace
PORT=3000                # HTTP server port

# =========================
# Redis Connection
# (pilih salah satu prioritas: REDIS_URL > REDIS_SOCKET_PATH > REDIS_HOST/PORT)
# =========================
REDIS_URL=redis://:your_password@127.0.0.1:6379/0
# URL penuh (bisa rediss:// untuk TLS). Jika ini diisi, REDIS_SOCKET_PATH & HOST/PORT diabaikan.

REDIS_SOCKET_PATH=/var/run/redis/redis.sock
# UNIX domain socket (lebih cepat untuk lokal). Tidak didukung di Windows (kecuali WSL).
# Jika ini diisi (dan REDIS_URL kosong), HOST/PORT diabaikan.

REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=your_password
# Dipakai jika REDIS_URL & REDIS_SOCKET_PATH kosong.

# =========================
# HTTP / Security
# =========================
ALLOWED_ORIGINS=*
# CORS allowed origins. Gunakan "*" hanya untuk dev; di prod isi daftar origin dipisah koma.

RATE_LIMIT_WINDOW_MS=60000   # jendela rate limit (ms)
RATE_LIMIT_MAX=100           # maksimum request per-IP per jendela

# =========================
# Baileys Reconnect / Backoff
# =========================
WS_RECONNECT_MIN_MS=2000     # backoff minimal (ms)
WS_RECONNECT_MAX_MS=30000    # backoff maksimal (ms)

# =========================
# Auto-Restore Sessions (startup & lazy)
# =========================
RESTORE_SCAN_COUNT=200           # hint COUNT untuk Redis SCAN per iterasi (bukan batas keras)
RESTORE_LOCK_RETRIES=2           # retry saat createSession kena 423 (locked)
RESTORE_LOCK_RETRY_DELAY_MS=2000 # jeda antar retry (ms), sebaiknya <= TTL lock
AUTO_RESTORE_STARTUP_DELAY_MS=1500 # jeda setelah server start sebelum auto-restore berjalan (ms)

# =========================
# Distributed Lock (locks.ts)
# =========================
LOCK_TTL_MS=10000            # TTL lock (ms). Harus > LOCK_RENEW_EVERY_MS.
LOCK_RENEW_EVERY_MS=5000     # interval perpanjang TTL (ms). Disarankan ≈ 1/2–1/3 dari TTL.

# =========================
# Panjang token otentikasi (karakter).
# =========================
AUTH_TOKEN_LEN=12